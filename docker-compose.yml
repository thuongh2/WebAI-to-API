# docker-compose.yml
#
# Production deployment using pre-built image from GitHub Container Registry.
# Image is automatically rebuilt on every push to master via GitHub Actions.
#
# To build locally instead of pulling, uncomment "build: ." and remove the "image:" line.

services:
  web_ai:
    image: ghcr.io/leolionart/webai-to-api:latest
    # build: .
    container_name: web_ai_server
    restart: always
    ports:
      - "6969:6969"
    environment:
      - PYTHONPATH=/app/src
      - CONFIG_PATH=/app/data/config.conf
    volumes:
      - webai_data:/app/data
    command: uvicorn app.main:app --host 0.0.0.0 --port 6969 --workers 1 --log-level info

volumes:
  webai_data:
